!function($,window,undefined){function ResponsiveTabs(element,options){this.element=element,this.$element=$(element),this.tabs=[],this.state="",this.rotateInterval=0,this.$queue=$({}),this.options=$.extend({},defaults,options),this.init()}var defaults={active:null,event:"click",disabled:[],collapsible:"accordion",startCollapsed:!1,rotate:!1,setHash:!1,animation:"default",animationQueue:!1,duration:500,scrollToAccordion:!1,scrollToAccordionOffset:0,accordionTabElement:"<div></div>",activate:function(){},deactivate:function(){},load:function(){},activateState:function(){},classes:{stateDefault:"r-tabs-state-default",stateActive:"r-tabs-state-active",stateDisabled:"r-tabs-state-disabled",stateExcluded:"r-tabs-state-excluded",container:"r-tabs",ul:"r-tabs-nav",tab:"r-tabs-tab",anchor:"r-tabs-anchor",panel:"r-tabs-panel",accordionTitle:"r-tabs-accordion-title"}};ResponsiveTabs.prototype.init=function(){var _this=this;this.tabs=this._loadElements(),this._loadClasses(),this._loadEvents(),$(window).on("resize",function(e){_this._setState(e)}),$(window).on("hashchange",function(e){var tabRef=_this._getTabRefBySelector(window.location.hash),oTab=_this._getTab(tabRef);tabRef>=0&&!oTab._ignoreHashChange&&!oTab.disabled&&_this._openTab(e,_this._getTab(tabRef),!0)}),this.options.rotate!==!1&&this.startRotation(),this.$element.bind("tabs-activate",function(e,oTab){_this.options.activate.call(this,e,oTab)}),this.$element.bind("tabs-deactivate",function(e,oTab){_this.options.deactivate.call(this,e,oTab)}),this.$element.bind("tabs-activate-state",function(e,state){_this.options.activateState.call(this,e,state)}),this.$element.bind("tabs-load",function(e){var startTab;_this._setState(e),_this.options.startCollapsed===!0||"accordion"===_this.options.startCollapsed&&"accordion"===_this.state||(startTab=_this._getStartTab(),_this._openTab(e,startTab),_this.options.load.call(this,e,startTab))}),this.$element.trigger("tabs-load")},ResponsiveTabs.prototype._loadElements=function(){var _this=this,$ul=this.$element.children("ul"),tabs=[],id=0;return this.$element.addClass(_this.options.classes.container),$ul.addClass(_this.options.classes.ul),$("li",$ul).each(function(){var $anchor,$panel,$accordionTab,$accordionAnchor,panelSelector,$tab=$(this),isExcluded=$tab.hasClass(_this.options.classes.stateExcluded);if(!isExcluded){$anchor=$("a",$tab),panelSelector=$anchor.attr("href"),$panel=$(panelSelector),$accordionTab=$(_this.options.accordionTabElement).insertBefore($panel),$accordionAnchor=$("<a></a>").attr("href",panelSelector).html($anchor.html()).appendTo($accordionTab);var oTab={_ignoreHashChange:!1,id:id,disabled:-1!==$.inArray(id,_this.options.disabled),tab:$(this),anchor:$("a",$tab),panel:$panel,selector:panelSelector,accordionTab:$accordionTab,accordionAnchor:$accordionAnchor,active:!1};id++,tabs.push(oTab)}}),tabs},ResponsiveTabs.prototype._loadClasses=function(){for(var i=0;i<this.tabs.length;i++)this.tabs[i].tab.addClass(this.options.classes.stateDefault).addClass(this.options.classes.tab),this.tabs[i].anchor.addClass(this.options.classes.anchor),this.tabs[i].panel.addClass(this.options.classes.stateDefault).addClass(this.options.classes.panel),this.tabs[i].accordionTab.addClass(this.options.classes.accordionTitle),this.tabs[i].accordionAnchor.addClass(this.options.classes.anchor),this.tabs[i].disabled&&(this.tabs[i].tab.removeClass(this.options.classes.stateDefault).addClass(this.options.classes.stateDisabled),this.tabs[i].accordionTab.removeClass(this.options.classes.stateDefault).addClass(this.options.classes.stateDisabled))},ResponsiveTabs.prototype._loadEvents=function(){for(var _this=this,fActivate=function(e){var current=_this._getCurrentTab(),activatedTab=e.data.tab;e.preventDefault(),activatedTab.disabled||(_this.options.setHash&&(history.pushState?history.pushState(null,null,activatedTab.selector):window.location.hash=activatedTab.selector),e.data.tab._ignoreHashChange=!0,(current!==activatedTab||_this._isCollapisble())&&(_this._closeTab(e,current),current===activatedTab&&_this._isCollapisble()||_this._openTab(e,activatedTab,!1,!0)))},i=0;i<this.tabs.length;i++)this.tabs[i].anchor.on(_this.options.event,{tab:_this.tabs[i]},fActivate),this.tabs[i].accordionAnchor.on(_this.options.event,{tab:_this.tabs[i]},fActivate)},ResponsiveTabs.prototype._getStartTab=function(){var startTab,tabRef=this._getTabRefBySelector(window.location.hash);return startTab=tabRef>=0&&!this._getTab(tabRef).disabled?this._getTab(tabRef):this.options.active>0&&!this._getTab(this.options.active).disabled?this._getTab(this.options.active):this._getTab(0)},ResponsiveTabs.prototype._setState=function(e){var startTab,$ul=$("ul",this.$element),oldState=this.state,startCollapsedIsState="string"==typeof this.options.startCollapsed;$ul.is(":visible")?this.state="tabs":this.state="accordion",this.state!==oldState&&(this.$element.trigger("tabs-activate-state",{oldState:oldState,newState:this.state}),oldState&&startCollapsedIsState&&this.options.startCollapsed!==this.state&&this._getCurrentTab()===undefined&&(startTab=this._getStartTab(e),this._openTab(e,startTab)))},ResponsiveTabs.prototype._openTab=function(e,oTab,closeCurrent,stopRotation){var scrollOffset,_this=this;closeCurrent&&this._closeTab(e,this._getCurrentTab()),stopRotation&&this.rotateInterval>0&&this.stopRotation(),oTab.active=!0,oTab.tab.removeClass(_this.options.classes.stateDefault).addClass(_this.options.classes.stateActive),oTab.accordionTab.removeClass(_this.options.classes.stateDefault).addClass(_this.options.classes.stateActive),_this._doTransition(oTab.panel,_this.options.animation,"open",function(){oTab.panel.removeClass(_this.options.classes.stateDefault).addClass(_this.options.classes.stateActive),"accordion"!==_this.getState()||!_this.options.scrollToAccordion||_this._isInView(oTab.accordionTab)&&"default"===_this.options.animation||(scrollOffset=oTab.accordionTab.offset().top-_this.options.scrollToAccordionOffset,"default"!==_this.options.animation&&_this.options.duration>0?$("html, body").animate({scrollTop:scrollOffset},_this.options.duration):$("html, body").scrollTop(scrollOffset))}),this.$element.trigger("tabs-activate",oTab)},ResponsiveTabs.prototype._closeTab=function(e,oTab){var doQueue,_this=this,doQueueOnState="string"==typeof _this.options.animationQueue;oTab!==undefined&&(doQueue=doQueueOnState&&_this.getState()===_this.options.animationQueue?!0:doQueueOnState?!1:_this.options.animationQueue,oTab.active=!1,oTab.tab.removeClass(_this.options.classes.stateActive).addClass(_this.options.classes.stateDefault),_this._doTransition(oTab.panel,_this.options.animation,"close",function(){oTab.accordionTab.removeClass(_this.options.classes.stateActive).addClass(_this.options.classes.stateDefault),oTab.panel.removeClass(_this.options.classes.stateActive).addClass(_this.options.classes.stateDefault)},!doQueue),this.$element.trigger("tabs-deactivate",oTab))},ResponsiveTabs.prototype._doTransition=function(panel,method,state,callback,dequeue){var effect,_this=this;switch(method){case"slide":effect="open"===state?"slideDown":"slideUp";break;case"fade":effect="open"===state?"fadeIn":"fadeOut";break;default:effect="open"===state?"show":"hide",_this.options.duration=0}this.$queue.queue("responsive-tabs",function(next){panel[effect]({duration:_this.options.duration,complete:function(){callback.call(panel,method,state),next()}})}),("open"===state||dequeue)&&this.$queue.dequeue("responsive-tabs")},ResponsiveTabs.prototype._isCollapisble=function(){return"boolean"==typeof this.options.collapsible&&this.options.collapsible||"string"==typeof this.options.collapsible&&this.options.collapsible===this.getState()},ResponsiveTabs.prototype._getTab=function(numRef){return this.tabs[numRef]},ResponsiveTabs.prototype._getTabRefBySelector=function(selector){for(var i=0;i<this.tabs.length;i++)if(this.tabs[i].selector===selector)return i;return-1},ResponsiveTabs.prototype._getCurrentTab=function(){return this._getTab(this._getCurrentTabRef())},ResponsiveTabs.prototype._getNextTabRef=function(currentTabRef){var tabRef=currentTabRef||this._getCurrentTabRef(),nextTabRef=tabRef===this.tabs.length-1?0:tabRef+1;return this._getTab(nextTabRef).disabled?this._getNextTabRef(nextTabRef):nextTabRef},ResponsiveTabs.prototype._getPreviousTabRef=function(){return 0===this._getCurrentTabRef()?this.tabs.length-1:this._getCurrentTabRef()-1},ResponsiveTabs.prototype._getCurrentTabRef=function(){for(var i=0;i<this.tabs.length;i++)if(this.tabs[i].active)return i;return-1},ResponsiveTabs.prototype._isInView=function($element){var docViewTop=$(window).scrollTop(),docViewBottom=docViewTop+$(window).height(),elemTop=$element.offset().top,elemBottom=elemTop+$element.height();return docViewBottom>=elemBottom&&elemTop>=docViewTop},ResponsiveTabs.prototype.activate=function(tabRef,stopRotation){var e=jQuery.Event("tabs-activate"),oTab=this._getTab(tabRef);oTab.disabled||this._openTab(e,oTab,!0,stopRotation||!0)},ResponsiveTabs.prototype.deactivate=function(tabRef){var e=jQuery.Event("tabs-dectivate"),oTab=this._getTab(tabRef);oTab.disabled||this._closeTab(e,oTab)},ResponsiveTabs.prototype.enable=function(tabRef){var oTab=this._getTab(tabRef);oTab&&(oTab.disabled=!1,oTab.tab.addClass(this.options.classes.stateDefault).removeClass(this.options.classes.stateDisabled),oTab.accordionTab.addClass(this.options.classes.stateDefault).removeClass(this.options.classes.stateDisabled))},ResponsiveTabs.prototype.disable=function(tabRef){var oTab=this._getTab(tabRef);oTab&&(oTab.disabled=!0,oTab.tab.removeClass(this.options.classes.stateDefault).addClass(this.options.classes.stateDisabled),oTab.accordionTab.removeClass(this.options.classes.stateDefault).addClass(this.options.classes.stateDisabled))},ResponsiveTabs.prototype.getState=function(){return this.state},ResponsiveTabs.prototype.startRotation=function(speed){var _this=this;if(!(this.tabs.length>this.options.disabled.length))throw new Error("Rotation is not possible if all tabs are disabled");this.rotateInterval=setInterval(function(){var e=jQuery.Event("rotate");_this._openTab(e,_this._getTab(_this._getNextTabRef()),!0)},speed||($.isNumeric(_this.options.rotate)?_this.options.rotate:4e3))},ResponsiveTabs.prototype.stopRotation=function(){window.clearInterval(this.rotateInterval),this.rotateInterval=0},ResponsiveTabs.prototype.option=function(key,value){return value&&(this.options[key]=value),this.options[key]},$.fn.responsiveTabs=function(options){var instance,args=arguments;return options===undefined||"object"==typeof options?this.each(function(){$.data(this,"responsivetabs")||$.data(this,"responsivetabs",new ResponsiveTabs(this,options))}):"string"==typeof options&&"_"!==options[0]&&"init"!==options?(instance=$.data(this[0],"responsivetabs"),"destroy"===options&&$.data(this,"responsivetabs",null),instance instanceof ResponsiveTabs&&"function"==typeof instance[options]?instance[options].apply(instance,Array.prototype.slice.call(args,1)):this):void 0}}(jQuery,window);